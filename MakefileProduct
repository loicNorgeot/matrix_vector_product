# http://gl.developpez.com/tutoriel/outil/makefile/
#
# Plusieurs Variables sont accessibles pour chaque règle:
# 	    $< correspond au nom de la première dépendance d'une règle
# 	    $@ correspond au nom de la cible
# 	    $^ correspond à la liste des dépendances
#
# La cible .PHONY sert pour clean et mrproper
# Toutes ses dépendances seront systématiquement reconstruites
#
# SRC = liste des sources, OBJ des .o et HEA des .h correspondants

CXX=icpc
CXXFLAGS=-fopenmp -O3 -lm
EXEC=main
SRC= binaryIO.cpp chrono.cpp
OBJ= $(SRC:.cpp=.o)
HEA= $(SRC:.cpp=.h)

all: $(EXEC)

main : $(OBJ) mainProduct.o
	$(CXX) -o $@ $^ $(CXXFLAGS)

%.o: %.cpp %.h
	$(CXX) -c $< $(CXXFLAGS)

mainProduct.o : mainProduct.cpp $(HEA)
	$(CXX) -c $< $(CXXFLAGS)


.PHONY: clean mrproper
clean:
	rm -rf *.o
mrproper: clean
	rm -rf $(EXEC)	  